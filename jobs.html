<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Welcome to Swift Peak Hosting Jobs</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.6.3/flowbite.min.css" rel="stylesheet">
  <style>
    /* Custom Dark Blue Theme */
    .dark-bg { background-color: #1E3A8A; } /* Dark blue background */
    .dark-form-bg { background-color: #374151; } /* Darker form background */
    .text-light { color: #F3F4F6; } /* Light text */
    .text-muted { color: #9CA3AF; } /* Muted text for placeholder */
    .border-light { border-color: #4B5563; } /* Light border color */
    .button-blue { background-color: #3B82F6; } /* Button blue color */
    .button-blue:hover { background-color: #2563EB; } /* Darker on hover */
    .hidden { display: none; } /* Class to hide elements */
  </style>
</head>
<body class="dark-bg text-light font-sans">
  <div class="max-w-2xl mx-auto mt-10 p-6 rounded shadow-lg dark-form-bg">
    <div id="welcomeMessage">
      <h1 class="text-3xl font-semibold text-center mb-6">Welcome to Swift Peak Hosting Jobs</h1>
      <p class="text-center mb-4">Please select from one of the jobs below on what job you think would suit you. Please note that not all jobs are voluntary at this time.</p>
      <label for="jobRole" class="block text-sm font-medium text-muted mb-2">Select Job Role</label>
      <select id="jobRole" class="w-full p-3 mb-6 bg-gray-700 border border-light rounded-md focus:outline-none text-light" onchange="showApplicationForm()">
        <option value="" selected disabled>Select a role</option>
        <option value="Customer Support Specialist">Customer Support Specialist</option>
        <option value="Technical Support Engineer">Technical Support Engineer</option>
        <option value="System Administrator">System Administrator</option>
        <option value="Network Engineer">Network Engineer</option>
        <option value="Account Manager">Account Manager</option>
        <option value="Sales Representative">Sales Representative</option>
        <option value="Marketing Specialist">Marketing Specialist</option>
        <option value="Product Manager">Product Manager</option>
        <option value="DevOps Engineer">DevOps Engineer</option>
        <option value="Security Analyst">Security Analyst</option>
        <option value="Web Developer">Web Developer</option>
        <option value="Billing Specialist">Billing Specialist</option>
      </select>
    </div>

    <!-- Application Form -->
    <form id="applicationForm" class="hidden" onsubmit="submitApplication(event)">
      <h1 id="jobTitle" class="text-3xl font-semibold text-center mb-6">Job Application</h1>
      
      <!-- Customer Support Specialist Questions -->
      <div id="Customer Support Specialist" class="question-group hidden">
        <label class="block mb-2">How do you handle a difficult or upset customer?</label>
        <textarea name="css_q1" class="w-full p-3 mb-4 bg-gray-800 border border-light rounded-md text-light" required></textarea>

        <label class="block mb-2">Can you describe a time when you solved a complex customer issue quickly?</label>
        <textarea name="css_q2" class="w-full p-3 mb-4 bg-gray-800 border border-light rounded-md text-light" required></textarea>

        <label class="block mb-2">How would you explain technical information to someone without a technical background?</label>
        <textarea name="css_q3" class="w-full p-3 mb-4 bg-gray-800 border border-light rounded-md text-light" required></textarea>

        <label class="block mb-2">Email</label>
        <input type="email" name="css_email" class="w-full p-3 mb-4 bg-gray-800 border border-light rounded-md text-light" required />

        <label class="block mb-2">Discord Username</label>
        <input type="text" name="css_discord" class="w-full p-3 mb-4 bg-gray-800 border border-light rounded-md text-light" required />

        <label class="block mb-2">Date of Birth</label>
        <input type="date" name="css_dob" class="w-full p-3 mb-4 bg-gray-800 border border-light rounded-md text-light" required>
      </div>

      <!-- Technical Support Engineer Questions -->
      <div id="Technical Support Engineer" class="question-group hidden">
        <label class="block mb-2">Whatâ€™s your experience with diagnosing server-related issues?</label>
        <textarea name="tse_q1" class="w-full p-3 mb-4 bg-gray-800 border border-light rounded-md text-light" required></textarea>

        <label class="block mb-2">Can you give an example of a challenging troubleshooting case you resolved?</label>
        <textarea name="tse_q2" class="w-full p-3 mb-4 bg-gray-800 border border-light rounded-md text-light" required></textarea>

        <label class="block mb-2">How familiar are you with scripting languages like Python or Bash for automating support tasks?</label>
        <textarea name="tse_q3" class="w-full p-3 mb-4 bg-gray-800 border border-light rounded-md text-light" required></textarea>

        <label class="block mb-2">Email</label>
        <input type="email" name="tse_email" class="w-full p-3 mb-4 bg-gray-800 border border-light rounded-md text-light" required />

        <label class="block mb-2">Discord Username</label>
        <input type="text" name="tse_discord" class="w-full p-3 mb-4 bg-gray-800 border border-light rounded-md text-light" required />
        
        <label class="block mb-2">Date of Birth</label>
        <input type="date" name="tse_dob" class="w-full p-3 mb-4 bg-gray-800 border border-light rounded-md text-light" required>
      </div>

      <!-- Return to Job Selection Button -->
      <button type="button" onclick="resetForm()" class="mt-4 w-full p-2 button-blue text-white rounded-md hover:bg-blue-700 focus:ring-4 focus:ring-blue-300">Change Job Role</button>

      <!-- Submit Button -->
      <button type="submit" class="w-full mt-6 p-2 button-blue text-white rounded-md hover:bg-blue-700 focus:ring-4 focus:ring-blue-300">Submit Application</button>
    </form>
  </div>

  <!-- Flowbite and JavaScript for showing questions and submitting the form -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.6.3/flowbite.min.js"></script>
  <script>
    function showApplicationForm() {
      const selectedRole = document.getElementById('jobRole').value;

      // Hide welcome message
      document.getElementById('welcomeMessage').classList.add('hidden');

      // Show application form
      document.getElementById('applicationForm').classList.remove('hidden');

      // Update the job title based on selection
      document.getElementById('jobTitle').textContent = `Job Application for ${selectedRole}`;

      // Hide all question groups
      document.querySelectorAll('.question-group').forEach(group => {
        group.classList.add('hidden');
        
        // Remove the required attribute to avoid focus issues when hidden
        Array.from(group.querySelectorAll('input, textarea')).forEach(input => {
          input.removeAttribute('required');
        });
      });

      // Show selected job role questions and add required attributes
      if (selectedRole) {
        const selectedGroup = document.getElementById(selectedRole);
        selectedGroup.classList.remove('hidden');
        Array.from(selectedGroup.querySelectorAll('input, textarea')).forEach(input => {
          input.setAttribute('required', 'required');
        });
      }
    }

    function resetForm() {
      // Hide application form
      document.getElementById('applicationForm').classList.add('hidden');
      
      // Show welcome message
      document.getElementById('welcomeMessage').classList.remove('hidden');

      // Reset selected job role
      document.getElementById('jobRole').value = '';
      
      // Clear all inputs
      Array.from(document.querySelectorAll('input, textarea')).forEach(input => {
        input.value = '';
      });
    }

    function submitApplication(event) {
      event.preventDefault();

      const jobRole = document.getElementById('jobRole').value;
      if (!jobRole) {
        alert('Please select a job role.');
        return;
      }

      // Collect answers from visible questions
      const answers = Array.from(document.querySelectorAll(`#${jobRole} textarea`))
        .map(textarea => textarea.value)
        .join('\n\n');

      const email = document.querySelector(`[name='${jobRole.toLowerCase().replace(/ /g, "_")}_email']`).value;
      const discord = document.querySelector(`[name='${jobRole.toLowerCase().replace(/ /g, "_")}_discord']`).value;

      const mailtoLink = `mailto:swiftpeakhosting@outlook.com?subject=Job Application - ${jobRole}&body=${encodeURIComponent(answers + '\n\nEmail: ' + email + '\nDiscord: ' + discord)}`;
      window.location.href = mailtoLink;
    }
  </script>
</body>
</html>
